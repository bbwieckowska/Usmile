% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/3_function_PIWplot.R
\name{PIWplot}
\alias{PIWplot}
\title{Prediction Improvement/Worsening (PIW) Plot}
\usage{
PIWplot(data_ref, data_new, title = "PIW Plot")
}
\arguments{
\item{data_ref}{List containing reference model output from \code{USprep_mdl} with elements:
\itemize{
\item y - vector of observed values (0/1)
\item p - vector of predicted probabilities
\item n_vars - number of predictor variables in the model
}}

\item{data_new}{List containing new model output from \code{USprep_mdl} (same structure as data_ref)}

\item{title}{Plot title (default: "PIW Plot")}
}
\value{
A ggplot object showing:
\itemize{
\item Points colored by prediction change direction (improvement/worsening) and event status
\item Diagonal reference line (y = x) representing no change between models
\item Consistent color scheme with USplot (blue for non-events, red for events)
}
}
\description{
Creates a scatter plot comparing predicted probabilities between a reference model and a new model,
highlighting where predictions improved or worsened for events and non-events.
}
\examples{
\dontrun{
# Load Heart Disease datasets
data(heart_disease)
data(heart_disease_train)
data(heart_disease_test)

# Prepare model outputs
model_glm_ref <- glm(disease ~ age + sex + bp + chol, data = heart_disease_train, family = "binomial")
model_glm_new <- glm(disease ~ age + sex + bp + chol + cp, data = heart_disease_train, family = "binomial")

train_out_ref <- USprep_mdl(model_glm_ref, dataset = NULL, testing = FALSE)
train_out_new <- USprep_mdl(model_glm_new, dataset = NULL, testing = FALSE)

# Create PIW plot for training data
PIWplot(data_ref = train_out_ref, data_new = train_out_new,
        title = "Prediction Changes: Adding CP to Cardiac Risk Model")

# Example with test data
test_out_ref <- USprep_mdl(model_glm_ref, dataset = heart_disease_test, testing = TRUE)
test_out_new <- USprep_mdl(model_glm_new, dataset = heart_disease_test, testing = TRUE)

PIWplot(data_ref = test_out_ref, data_new = test_out_new,
        title = "Test Data Prediction Changes")
}

}
