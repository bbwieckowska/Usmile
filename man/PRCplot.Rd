% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/3_function_PRCplot.R
\name{PRCplot}
\alias{PRCplot}
\title{Precision-Recall Curve Plot with AUPRC Comparison}
\usage{
PRCplot(
  data_ref,
  data_new,
  title = "Precision-Recall plot",
  n_boot = 1000,
  seed = 123
)
}
\arguments{
\item{data_ref}{List containing reference model output from \code{USprep_mdl} with elements:
\itemize{
\item y - vector of observed values (0/1)
\item p - vector of predicted probabilities
\item n_vars - number of predictor variables in the model
}}

\item{data_new}{List containing new model output from \code{USprep_mdl} (same structure as data_ref)}

\item{title}{Plot title (default: "Precision-Recall plot")}

\item{n_boot}{Number of bootstrap samples for significance testing (default: 1000)}

\item{seed}{Random seed for reproducibility (default: 123)}
}
\value{
A list containing:
\itemize{
\item plot - ggplot object showing PR curves for both models with baseline prevalence
\item results_table - data frame with performance metrics:
\itemize{
\item AUPRC_ref - Area Under PR Curve for reference model
\item AUPRC_new - Area Under PR Curve for new model
\item AUPRC_diff_p_value - Bootstrap p-value for AUPRC difference
}
}
}
\description{
Creates a precision-recall plot comparing two models and computes area under the PR curve (AUPRC)
with statistical significance testing via bootstrap. Includes baseline prevalence reference.
}
\examples{
\dontrun{
# Load Heart Disease datasets
data(heart_disease)
data(heart_disease_train)
data(heart_disease_test)

# Prepare model outputs
model_glm_ref <- glm(disease ~ age + sex + bp + chol, data = train_data, family = "binomial")
model_glm_new <- glm(disease ~ age + sex + bp + chol + cp, data = train_data, family = "binomial")

train_out_ref <- USprep_mdl(model_glm_ref, dataset = NULL, testing = FALSE)
train_out_new <- USprep_mdl(model_glm_new, dataset = NULL, testing = FALSE)

# Create PR curve plot with default settings
pr_results <- PRCplot(
  data_ref = train_out_ref,
  data_new = train_out_new,
  title = "PR Curve: Basic vs Extended Cardiac Model"
)

# Display plot and metrics
pr_results$plot
pr_results$results_table

# Example with test data and custom bootstrap samples
test_out_ref <- USprep_mdl(model_glm_ref, dataset = test_data, testing = TRUE)
test_out_new <- USprep_mdl(model_glm_new, dataset = test_data, testing = TRUE)

PRCplot(
  data_ref = test_out_ref,
  data_new = test_out_new,
  n_boot = 500,
  seed = 456,
  title = "Test Data PR Curves (500 bootstraps)"
)
}

}
